<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Patentes AR</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden; /* evita scrollbars */
    width: 100%;
    height: 100%;
    background: #1e1e1e;
    display: grid;
    place-items: center;
  }

  /* Contenedor principal con proporción 2:1 (ancho:alto) */
  .frame {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    aspect-ratio: 2 / 1; /* mantiene proporción 384x192 */
    background: #fff;
    overflow: hidden;
  }

  /* Lista de patentes, ocupa todo el frame */
  .list {
    display: flex;
    flex-direction: column;
    transition: transform 1s ease;
    height: 100%;
  }

  .item {
    width: 100%;
    height: 100%;
    display: grid;
    place-items: center;
  }

  svg {
    width: 100%;
    height: 100%;
  }
</style>
</head>
<body>
  <div class="frame">
    <div class="list" id="list">
      <div class="item"></div>
    </div>
  </div>

<script>
  const list = document.getElementById('list');

  function normalizePlate(raw) {
    const s = (raw || "").toUpperCase().replace(/[^A-Z0-9]/g,"");
    if(s.length === 7) return s.slice(0,2)+" "+s.slice(2,5)+" "+s.slice(5);
    if(s.length === 6) return s.slice(0,3)+" "+s.slice(3);
    return raw;
  }

  function renderPlateSVG(text) {
    const plate = normalizePlate(text);
    return `<svg viewBox="0 0 384 192" xmlns="http://www.w3.org/2000/svg">
      <rect x="0" y="0" width="384" height="192" fill="none" stroke="#000" stroke-width="4"/>
      <rect x="4" y="4" width="376" height="184" fill="#fff" stroke="#000" stroke-width="2"/>
      <rect x="4" y="4" width="376" height="40" fill="#0A47A7"/>
      <text x="192" y="30" text-anchor="middle" font-family="Arial" font-size="14" fill="#fff" font-weight="700">
        REPÚBLICA ARGENTINA
      </text>
      <text x="192" y="132" text-anchor="middle" font-family="Impact, Arial Black, sans-serif" font-size="60" fill="#000" letter-spacing="6">
        ${plate}
      </text>
    </svg>`;
  }

  function createItem(txt){
    const d = document.createElement('div');
    d.className = 'item';
    d.innerHTML = renderPlateSVG(txt);
    return d;
  }

  // Patente de ejemplo inicial
  list.firstElementChild.replaceWith(createItem("AA000AA"));

  const queue = [];
  let ticking = false;

  function tick() {
    if(!queue.length){ ticking = false; return; }
    ticking = true;
    const next = queue.shift();
    list.appendChild(createItem(next));
    const h = list.parentElement.clientHeight;
    list.style.transform = `translateY(-${h}px)`;

    setTimeout(() => {
      list.style.transition = 'none';
      list.style.transform = 'translateY(0)';
      list.removeChild(list.firstElementChild);
      list.offsetHeight;
      list.style.transition = 'transform 1s ease';
      if(queue.length) tick(); else ticking = false;
    }, 1000);
  }

  window.queuePlate = function(txt){
    queue.push(txt);
    if(!ticking) tick();
  }
</script>
</body>
</html>
